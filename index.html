<!DOCTYPE html>
<html lang="th">
<head>
┬а ┬а <meta charset="UTF-8">
┬а ┬а <meta name="viewport" content="width=device-width, initial-scale=1.0">
┬а ┬а <title>р╕гр╕░р╕Ър╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М (Firebase)</title>
┬а ┬а <script src="https://cdn.tailwindcss.com"></script>
┬а ┬а <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Kanit:wght@400;500;600;700&display=swap" rel="stylesheet">
┬а ┬а <style>
┬а ┬а ┬а ┬а body {
┬а ┬а ┬а ┬а ┬а ┬а font-family: 'Kanit', sans-serif;
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а .no-scrollbar::-webkit-scrollbar {
┬а ┬а ┬а ┬а ┬а ┬а display: none;
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а .no-scrollbar {
┬а ┬а ┬а ┬а ┬а ┬а -ms-overflow-style: none;
┬а ┬а ┬а ┬а ┬а ┬а scrollbar-width: none;
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а /* Style for custom menu card in Modal (retained) */
┬а ┬а ┬а ┬а .matcha-menu-card, .coffee-menu-card, .smoothie-menu-card {
┬а ┬а ┬а ┬а ┬а ┬а display: flex;
┬а ┬а ┬а ┬а ┬а ┬а justify-content: space-between;
┬а ┬а ┬а ┬а ┬а ┬а align-items: center;
┬а ┬а ┬а ┬а ┬а ┬а padding: 0.75rem;
┬а ┬а ┬а ┬а ┬а ┬а border-radius: 0.5rem;
┬а ┬а ┬а ┬а ┬а ┬а cursor: pointer;
┬а ┬а ┬а ┬а ┬а ┬а transition: background-color 0.3s;
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а .matcha-menu-card { background-color: #f0fdf4; }
┬а ┬а ┬а ┬а .matcha-menu-card:hover { background-color: #dcfce7; }
┬а ┬а ┬а ┬а .coffee-menu-card { background-color: #fcf8f3; }
┬а ┬а ┬а ┬а .coffee-menu-card:hover { background-color: #fbede3; }
┬а ┬а ┬а ┬а .smoothie-menu-card { background-color: #f0f9ff; }
┬а ┬а ┬а ┬а .smoothie-menu-card:hover { background-color: #e0f2fe; }
┬а ┬а ┬а ┬а .price-small { color: #10b981; font-weight: 500; }
┬а ┬а ┬а ┬а .price-large { color: #059669; font-weight: 700; }
┬а ┬а ┬а ┬а .price-coffee { color: #7c2d12; font-weight: 700; }
┬а ┬а ┬а ┬а .price-smoothie { color: #0284c7; font-weight: 700; }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а /* QR Image Container Style */
┬а ┬а ┬а ┬а .qr-image-container {
┬а ┬а ┬а ┬а ┬а ┬а width: 256px;
┬а ┬а ┬а ┬а ┬а ┬а height: 256px;
┬а ┬а ┬а ┬а ┬а ┬а margin: 0 auto;
┬а ┬а ┬а ┬а }
┬а ┬а </style>
</head>
<body class="bg-gray-100 text-gray-800">

┬а ┬а <div class="container mx-auto p-4 max-w-7xl">
┬а ┬а ┬а ┬а <header class="text-center mb-8">
┬а ┬а ┬а ┬а ┬а ┬а <h1 class="text-4xl font-bold text-teal-600">р╕гр╕░р╕Ър╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М</h1>
┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-500">р╣Гр╕Кр╣Й Firebase Firestore р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Др╕┤р╕зр╣Бр╕Ър╕Ъ Realtime</p>
┬а ┬а ┬а ┬а </header>

┬а ┬а ┬а ┬а <div class="bg-white p-6 rounded-2xl shadow-lg mb-8">
┬а ┬а ┬а ┬а ┬а ┬а <h2 class="text-2xl font-semibold mb-4 border-b pb-2">ЁЯУК р╣Бр╕Фр╕Кр╕Ър╕нр╕гр╣Мр╕Фр╕кр╕гр╕╕р╕Ыр╕вр╕нр╕Фр╕Вр╕▓р╕в</h2>
┬а ┬а ┬а ┬а ┬а ┬а <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-blue-50 p-4 rounded-xl">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-sm text-blue-600 font-medium">р╕вр╕нр╕Фр╕Вр╕▓р╕вр╕зр╕▒р╕Щр╕Щр╕╡р╣Й</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p id="sales-today" class="text-3xl font-bold text-blue-800">р╕┐0</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-green-50 p-4 rounded-xl">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-sm text-green-600 font-medium">р╕вр╕нр╕Фр╕Вр╕▓р╕вр╕кр╕▒р╕Ыр╕Фр╕▓р╕лр╣Мр╕Щр╕╡р╣Й</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p id="sales-week" class="text-3xl font-bold text-green-800">р╕┐0</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-purple-50 p-4 rounded-xl">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-sm text-purple-600 font-medium">р╕вр╕нр╕Фр╕Вр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щр╕Щр╕╡р╣Й</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p id="sales-month" class="text-3xl font-bold text-purple-800">р╕┐0</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а <button onclick="showMenuReport()" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а тнР р╕Фр╕╣р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╣Ар╕бр╕Щр╕╣р╕Чр╕╡р╣Ир╕Вр╕▓р╕вр╕Фр╕╡
┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white p-6 rounded-2xl shadow-lg">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h2 class="text-2xl font-semibold mb-4 border-b pb-2">р╣Ар╕бр╕Щр╕╣р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕Фр╕╖р╣Ир╕б</h2>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="menu-grid" class="grid grid-cols-2 md:grid-cols-3 gap-4 h-[60vh] overflow-y-auto no-scrollbar pr-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-3 bg-amber-700 hover:bg-amber-800 text-white font-bold rounded-lg text-center cursor-pointer transition duration-300 shadow-lg" onclick="showCoffeeMenuModal()">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="font-semibold">тШХ р╣Ар╕бр╕Щр╕╣р╕Бр╕▓р╣Бр╕Я (COFFEE)</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-xs mt-1">р╕Др╕ер╕┤р╕Бр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕ер╕╖р╕нр╕Б</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-3 bg-emerald-500 hover:bg-emerald-600 text-white font-bold rounded-lg text-center cursor-pointer transition duration-300 shadow-lg" onclick="showMatchaMenuModal()">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="font-semibold">ЁЯН╡ р╣Ар╕бр╕Щр╕╣р╕бр╕▒р╕Чр╕Йр╕░/р╕Кр╕▓р╣Ар╕Вр╕╡р╕вр╕з</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-xs mt-1">р╕Др╕ер╕┤р╕Бр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕ер╕╖р╕нр╕Б</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-3 bg-sky-500 hover:bg-sky-600 text-white font-bold rounded-lg text-center cursor-pointer transition duration-300 shadow-lg" onclick="showFruitSmoothieModal()">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="font-semibold">ЁЯНУ р╣Ар╕бр╕Щр╕╣р╕кр╕бр╕╣р╕Чр╕Хр╕╡р╣Йр╕Ьр╕ер╣Др╕бр╣Й/р╣Вр╕вр╣Ар╕Бр╕┤р╕гр╣Мр╕Х</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-xs mt-1">р╕Др╕ер╕┤р╕Бр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕ер╕╖р╕нр╕Б</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а <div class="flex flex-col gap-8">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white p-6 rounded-2xl shadow-lg flex-grow flex flex-col">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h2 class="text-2xl font-semibold mb-4 border-b pb-2">р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ</h2>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="current-order-items" class="flex-grow space-y-2 overflow-y-auto no-scrollbar pr-2 mb-4 min-h-[150px]">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-400 text-center mt-4">р╣Ар╕ер╕╖р╕нр╕Бр╣Ар╕бр╕Щр╕╣р╕Ир╕▓р╕Бр╕Фр╣Йр╕▓р╕Щр╕Лр╣Йр╕▓р╕вр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕гр╕┤р╣Ир╕б...</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="mb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <label for="delivery-address" class="block text-sm font-medium text-gray-700 mb-1">р╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣Ир╕Ир╕▒р╕Фр╕кр╣Ир╕З (Delivery Address)</label>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <textarea id="delivery-address" rows="3" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-teal-500 focus:border-teal-500" placeholder="р╕Бр╕гр╕нр╕Бр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣Ир╕Ир╕▒р╕Фр╕кр╣Ир╕Зр╕Чр╕╡р╣Ир╕Щр╕╡р╣И"></textarea>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="border-t pt-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-center text-xl font-bold mb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span>р╕гр╕зр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф:</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span id="total-price" class="text-teal-600">р╕┐0</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button id="submit-order-btn" class="w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 disabled:bg-gray-300">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕кр╣Ир╕Зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white p-6 rounded-2xl shadow-lg">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h2 class="text-2xl font-semibold mb-4 border-b pb-2">р╕Др╕┤р╕зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М</h2>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div id="order-queue" class="space-y-4 h-[25vh] overflow-y-auto no-scrollbar pr-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-400 text-center mt-4">р╕Бр╕│р╕ер╕▒р╕Зр╣Вр╕лр╕ер╕Фр╕Др╕┤р╕зр╕Ир╕▓р╕Б Firebase...</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>
┬а ┬а┬а
┬а ┬а <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
┬а ┬а ┬а ┬а <div class="bg-white rounded-lg p-8 shadow-xl text-center">
┬а ┬а ┬а ┬а ┬а ┬а <svg class="w-16 h-16 text-green-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
┬а ┬а ┬а ┬а ┬а ┬а <h3 class="text-2xl font-semibold mb-2">р╕кр╕│р╣Ар╕гр╣Зр╕И!</h3>
┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-600" id="modal-message"></p>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>

┬а ┬а <div id="menu-report-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
┬а ┬а ┬а ┬а <div class="bg-white rounded-lg p-6 shadow-xl w-11/12 max-w-2xl">
┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-center border-b pb-3 mb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 class="text-2xl font-semibold text-teal-600">тнР р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╣Ар╕бр╕Щр╕╣р╕Чр╕╡р╣Ир╕Вр╕▓р╕вр╕Фр╕╡</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="document.getElementById('menu-report-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div id="menu-report-content" class="h-96 overflow-y-auto">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>

┬а ┬а <div id="matcha-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
┬а ┬а ┬а ┬а <div class="bg-white rounded-lg p-6 shadow-xl w-11/12 max-w-lg">
┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-center border-b pb-3 mb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 class="text-2xl font-bold text-emerald-600">ЁЯН╡ р╣Ар╕бр╕Щр╕╣р╕Кр╕▓р╣Ар╕Вр╕╡р╕вр╕з/р╕бр╕▒р╕Чр╕Йр╕░ (GREEN TEA)</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="document.getElementById('matcha-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between text-center font-bold text-gray-600 mb-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1/2 text-left">р╣Ар╕бр╕Щр╕╣</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1/4">16 Oz.</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1/4">22 Oz.</span>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div id="matcha-menu-list" class="space-y-2 h-96 overflow-y-auto pr-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>

┬а ┬а <div id="coffee-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
┬а ┬а ┬а ┬а <div class="bg-white rounded-lg p-6 shadow-xl w-11/12 max-w-lg">
┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-center border-b pb-3 mb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 class="text-2xl font-bold text-amber-700">тШХ р╣Ар╕бр╕Щр╕╣р╕Бр╕▓р╣Бр╕Я (COFFEE)</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="document.getElementById('coffee-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between text-center font-bold text-gray-600 mb-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-2/3 text-left">р╣Ар╕бр╕Щр╕╣</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1/3 text-right">р╕гр╕▓р╕Др╕▓ (р╕┐)</span>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div id="coffee-menu-list" class="space-y-2 h-96 overflow-y-auto pr-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>
┬а ┬а┬а
┬а ┬а <div id="fruit-smoothie-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
┬а ┬а ┬а ┬а <div class="bg-white rounded-lg p-6 shadow-xl w-11/12 max-w-lg">
┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-center border-b pb-3 mb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h3 class="text-2xl font-bold text-sky-600">ЁЯНУ р╣Ар╕бр╕Щр╕╣р╕кр╕бр╕╣р╕Чр╕Хр╕╡р╣Йр╕Ьр╕ер╣Др╕бр╣Й/р╣Вр╕вр╣Ар╕Бр╕┤р╕гр╣Мр╕Х</h3>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="document.getElementById('fruit-smoothie-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="text-sm text-gray-500 mb-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="font-bold text-sky-700">Fruit Smoothie (р╕Ьр╕ер╣Др╕бр╣Йр╕Ыр╕▒р╣Ир╕Щ)</p>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div id="fruit-smoothie-list" class="space-y-2 mb-4 border-b pb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а <div class="text-sm text-gray-500 mb-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="font-bold text-sky-700">Smoothie Yogurt (р╕кр╕бр╕╣р╕Чр╕Хр╕╡р╣Йр╣Вр╕вр╣Ар╕Бр╕┤р╕гр╣Мр╕Х)</p>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div id="smoothie-yogurt-list" class="space-y-2 h-64 overflow-y-auto pr-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а┬а
┬а ┬а <div id="qr-payment-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50">
┬а ┬а ┬а ┬а <div class="bg-white rounded-lg p-8 shadow-xl text-center w-11/12 max-w-sm">
┬а ┬а ┬а ┬а ┬а ┬а <h3 class="text-2xl font-bold text-teal-600 mb-2">Krungthai THAI QR PAYMENT</h3>
┬а ┬а ┬а ┬а ┬а ┬а <p class="text-xl font-medium text-gray-800 mb-3">р╕вр╕нр╕Фр╕гр╕зр╕б: <span id="qr-total-amount" class="text-red-600 font-extrabold">р╕┐0</span></p>
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-center flex-col items-center p-2 bg-white border border-gray-100 rounded-xl shadow-lg mb-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="qr-image-container my-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <img src="https://raw.githubusercontent.com/khamphi880-boop/Order-Menu/c9af72f12e59972d1bed7b54fc7ab6831bd56952/176464.jpg"┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а alt="Krungthai PromptPay QR Code"┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а class="w-full h-full object-contain mx-auto">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="w-full p-2 border-t pt-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-base text-gray-700 font-semibold">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕Кр╕╖р╣Ир╕нр╕Ър╕▒р╕Нр╕Кр╕╡: <span class="font-bold text-gray-900">р╕Щ.р╕к.р╕Щр╕др╕Хр╕Нр╕▓ р╕Щр╕▓р╣Ар╕бр╕╖р╕нр╕Зр╕гр╕▒р╕Бр╕йр╣М</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а <p class="text-sm text-red-500 mt-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а *р╕вр╕нр╕Фр╕Ир╕░р╕Цр╕╣р╕Бр╕Бр╕│р╕лр╕Щр╕Фр╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤ (р╕Бр╕гр╕╕р╕Ур╕▓р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щр╕Бр╕▒р╕Ър╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ)
┬а ┬а ┬а ┬а ┬а ┬а </p>

┬а ┬а ┬а ┬а ┬а ┬а <button onclick="shareOrderSummary()" class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 rounded-lg flex items-center justify-center space-x-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.882 13.791 9 14.271 9 14.75c0 1.282-.622 2.45-1.608 3.018l-3.376 1.948A2.5 2.5 0 011 19.5V4.5a2.5 2.5 0 014.016-1.948l3.376 1.948A4.5 4.5 0 019 9.25c0 .479-.118.958-.316 1.407M16 12a4 4 0 100-8 4 4 0 000 8zM18 16a4 4 0 100-8 4 4 0 000 8z"></path></svg>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span>р╣Бр╕Кр╕гр╣Мр╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕е (LINE, р╕нр╕╖р╣Ир╕Щр╣Ж)</span>
┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а <button onclick="document.getElementById('qr-payment-modal').classList.add('hidden')" class="mt-3 w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 rounded-lg">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕гр╕▒р╕Ър╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ
┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>

┬а ┬а <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
┬а ┬а <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>┬а

┬а ┬а <script>
┬а ┬а ┬а ┬а // 2. р╣Вр╕Др╣Йр╕Ф Configuration р╕Вр╕нр╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣Мр╕Др╕╕р╕У
┬а ┬а ┬а ┬а // !!! ATTENTION !!!: р╕Хр╣Йр╕нр╕Зр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Др╣Ир╕▓р╣Ар╕лр╕ер╣Ир╕▓р╕Щр╕╡р╣Йр╣Ар╕Ыр╣Зр╕Щр╕Др╣Ир╕▓р╕Вр╕нр╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣Мр╕Др╕╕р╕У
┬а ┬а ┬а ┬а const firebaseConfig = {
┬а ┬а ┬а ┬а ┬а ┬а apiKey: "AIzaSyDztPWzAu8Lz8olg_dhlCLBQVEyjTQqpOk", // <--- REPLACE
┬а ┬а ┬а ┬а ┬а ┬а authDomain: "ordermanagement-f6724.firebaseapp.com", // <--- REPLACE
┬а ┬а ┬а ┬а ┬а ┬а projectId: "ordermanagement-f6724", // <--- REPLACE
┬а ┬а ┬а ┬а ┬а ┬а storageBucket: "ordermanagement-f6724.appspot.com", // <--- REPLACE (р╣Гр╕Кр╣Й .appspot.com)
┬а ┬а ┬а ┬а ┬а ┬а messagingSenderId: "321286666597",
┬а ┬а ┬а ┬а ┬а ┬а appId: "1:321286666597:web:062fef7df8fc456fec098c",
┬а ┬а ┬а ┬а };

┬а ┬а ┬а ┬а // 3. Initialize App р╣Бр╕ер╕░ Firestore
┬а ┬а ┬а ┬а firebase.initializeApp(firebaseConfig);
┬а ┬а ┬а ┬а const db = firebase.firestore();
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // ====================================================================
┬а ┬а ┬а ┬а // ЁЯУЭ START: р╣Вр╕Др╣Йр╕Ф JavaScript р╕гр╕░р╕Ър╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М (р╕Ыр╕гр╕▒р╕Ър╣Ар╕Ыр╣Зр╕Щ Firebase) ЁЯУЭ
┬а ┬а ┬а ┬а // ====================================================================

┬а ┬а ┬а ┬а // *** Menu Data (Full lists) ***
┬а ┬а ┬а ┬а const menuData = [
┬а ┬а ┬а ┬а ┬а ┬а { id: 1, name: 'р╣Ар╕Ьр╕╖р╕нр╕Б', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 2, name: 'р╣Бр╕Др╕Щр╕Хр╕▓р╕ер╕╣р╕Ы', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 3, name: 'р╕Щр╕бр╕кр╕Ф', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 4, name: 'р╕Щр╕бр╕Щр╣Йр╕│р╕Ьр╕╢р╣Йр╕З', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 5, name: 'р╕Щр╕бр╕зр╕▓р╕Щр╕┤р╕ер╕ер╕▓', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 6, name: 'р╕Щр╕бр╕Др╕▓р╕гр╕▓р╣Ар╕бр╕е', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 7, name: 'р╕Щр╕бр╣Ар╕вр╣Зр╕Щ/р╕Щр╕бр╕Кр╕бр╕Юр╕╣', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 8, name: 'р╕Щр╕бр╕Ър╕гр╕▓р╕зр╕Щр╣Мр╕Кр╕╣р╕Бр╕▓р╕гр╣М', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 9, name: 'р╕Щр╕бр╕кр╕Ф р╕Зр╕▓р╕Фр╕│', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 10, name: 'р╕Щр╕бр╕бр╕┤р╣Йр╕Щр╕Чр╣М', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 11, name: 'р╣Вр╕Бр╣Вр╕Бр╣Й', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 12, name: 'р╕Щр╕бр╕бр╕┤р╣Йр╕Щр╕Чр╣Мр╣Вр╕Бр╣Вр╕Бр╣Й', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 13, name: 'р╕Кр╣Зр╕нр╕Бр╣Вр╕Бр╣Бр╕ер╕Х', prices: { '16 Oz.': 40, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 14, name: 'р╕Щр╕бр╕бр╕┤р╣Йр╕Щр╕Чр╣Мр╕Кр╣Зр╕нр╕Б', prices: { '16 Oz.': 40, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 15, name: 'р╕Щр╕бр╕кр╕Фр╣Вр╕нр╕гр╕┤р╣Вр╕нр╣Й', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 16, name: 'р╕Щр╕бр╕Бр╕ер╣Йр╕зр╕в', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 17, name: 'р╕Бр╕ер╣Йр╕зр╕вр╕Кр╣Зр╕нр╕Б', prices: { '16 Oz.': 40, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 18, name: 'р╕Бр╕ер╣Йр╕зр╕вр╣Вр╕Бр╣Вр╕Бр╣Й', prices: { '16 Oz.': 40, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 19, name: 'р╕бр╕░р╕Юр╕гр╣Йр╕▓р╕зр╕Щр╕бр╕кр╕Ф', prices: { '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 55 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 20, name: 'р╕Кр╕▓р╣Др╕Чр╕в (р╣Др╕Хр╣Йр╕лр╕зр╕▒р╕Щ)', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 21, name: 'р╕Кр╕▓р╣Др╕Чр╕в (р╣Гр╕Ър╕Кр╕▓)', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 22, name: 'р╕Кр╕▓р╣Др╕Чр╕в р╕ер╕▓р╣Ар╕Хр╣Й р╕бр╕░р╕Юр╕гр╣Йр╕▓р╕з', prices: { '16 Oz.': 45, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 23, name: 'р╕Кр╕▓р╣Ар╕Вр╕╡р╕вр╕з (р╣Др╕бр╣Ир╕Бр╕ер╕┤р╣Ир╕Щр╕бр╕░р╕ер╕┤)', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 24, name: 'р╕Кр╕▓р╣Ар╕Вр╕╡р╕вр╕зр╕ер╕▓р╣Ар╕Хр╣Й р╕бр╕░р╕Юр╕гр╣Йр╕▓р╕з', prices: { '16 Oz.': 45, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 25, name: 'р╕Кр╕▓р╣Ар╕Вр╕╡р╕вр╕зр╕бр╕░р╕Щр╕▓р╕з', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 26, name: 'р╕Кр╕▓р╕бр╕░р╕Щр╕▓р╕з', prices: { '16 Oz.': 30, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 27, name: 'р╕Кр╕▓р╕Юр╕╡р╕К', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 28, name: 'р╕Кр╕▓р╕бр╕░р╕ер╕┤', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: 29, name: 'р╕Кр╕▓р╕ер╕┤р╣Йр╕Щр╕Ир╕╡р╣И', prices: { '16 Oz.': 35, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50 } },
┬а ┬а ┬а ┬а ];
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а const matchaMenuData = [
┬а ┬а ┬а ┬а ┬а ┬а { id: -1, name: 'р╣Ар╕Юр╕╡р╕вр╕зр╕бр╕▒р╕Чр╕Йр╕░', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -2, name: 'р╣Ар╕Юр╕╡р╕вр╕зр╕бр╕▒р╕Чр╕Йр╕░ р╕Щр╣Йр╕│р╕Ьр╕╢р╣Йр╕З', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -3, name: 'р╣Ар╕Юр╕╡р╕вр╕зр╕бр╕▒р╕Чр╕Йр╕░ р╕зр╕▓р╕Щр╕┤р╕ер╕ер╕▓', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -4, name: 'р╣Ар╕Юр╕╡р╕вр╕зр╕бр╕▒р╕Чр╕Йр╕░ р╕Др╕▓р╕гр╕▓р╣Ар╕бр╕е', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 40 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -5, name: 'р╣Ар╕Юр╕╡р╕вр╕зр╕бр╕▒р╕Чр╕Йр╕░ р╕бр╕░р╕Юр╕гр╣Йр╕▓р╕з', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -6, name: 'р╣Ар╕Юр╕╡р╕вр╕зр╕бр╕▒р╕Чр╕Йр╕░ р╕Щр╣Йр╕│р╕кр╣Йр╕б', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -7, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -8, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╣Вр╕нр╕гр╕┤р╣Вр╕нр╣Й', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -9, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╕Др╕▓р╕гр╕▓р╣Ар╕бр╕е', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 60, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -10, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╕бр╕░р╕Юр╕гр╣Йр╕▓р╕зр╕кр╕Ф', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -11, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╕зр╕▓р╕Щр╕┤р╕ер╕ер╕▓', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 60, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -12, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╕кр╕Хр╕нр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -13, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╕Ър╕ер╕╣р╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -14, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╕Щр╣Йр╕│р╕Ьр╕╢р╣Йр╕З', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 60, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -15, name: 'р╕бр╕▒р╕Чр╕Йр╕░ р╕нр╣Ар╕бр╕гр╕┤р╕Бр╕▓р╣Вр╕Щр╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 60, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -16, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╕Др╕нр╕Яр╕Яр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 60, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -17, name: 'р╕бр╕▒р╕Чр╕Йр╕░р╕ер╕▓р╣Ар╕Хр╣Й р╕Цр╕▒р╣Ир╕зр╣Бр╕Фр╕З', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -18, name: 'р╕бр╕▒р╕Чр╕Йр╕░ р╕Цр╕▒р╣Ир╕зр╣Бр╕Фр╕З (р╕Ыр╕▒р╣Ир╕Щ)', prices: { '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ];
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а const coffeeMenuData = [
┬а ┬а ┬а ┬а ┬а ┬а { id: -101, name: 'р╕нр╣Ар╕бр╕гр╕┤р╕Бр╕▓р╣Вр╕Щр╣И', prices: { 'р╣Ар╕вр╣Зр╕Щ': 45, 'р╕Ыр╕▒р╣Ир╕Щ': 55 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -102, name: 'р╕нр╣Ар╕бр╕гр╕┤р╕Бр╕▓р╣Вр╕Щр╣И р╕Щр╣Йр╕│р╕Ьр╕╢р╣Йр╕З', prices: { 'р╣Ар╕вр╣Зр╕Щ': 50, 'р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -103, name: 'р╕нр╣Ар╕бр╕гр╕┤р╕Бр╕▓р╣Вр╕Щр╣И р╕бр╕░р╕Юр╕гр╣Йр╕▓р╕з', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -104, name: 'р╕нр╣Ар╕бр╕гр╕┤р╕Бр╕▓р╣Вр╕Щр╣И р╕Щр╣Йр╕│р╕кр╣Йр╕б', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -105, name: 'р╣Ар╕нр╕кр╣Ар╕Ыр╕гр╕кр╣Вр╕Лр╣И', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -106, name: 'р╕ер╕▓р╣Ар╕Хр╣Й', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -107, name: 'р╕ер╕▓р╣Ар╕Хр╣Й р╕бр╕░р╕Юр╕гр╣Йр╕▓р╕з р╕Щр╕бр╕кр╕Ф', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -108, name: 'р╕зр╕▓р╕Щр╕┤р╕ер╕ер╕▓ р╕ер╕▓р╣Ар╕Хр╣Й', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -109, name: 'р╕Др╕▓р╕Ыр╕╣р╕Кр╕┤р╣Вр╕Щр╣И', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -110, name: 'р╕бр╕нр╕Др╕Др╣Ир╕▓', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -111, name: 'р╕Др╕▓р╕гр╕▓р╣Ар╕бр╕е р╕бр╕▒р╕Др╕Др╕┤р╕нр╕▓р╣Вр╕Хр╣Й', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -112, name: 'р╣Ар╕ор╣Ар╕Лр╕ер╕Щр╕▒р╕Ч р╕ер╕▓р╣Ар╕Хр╣Й', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -113, name: 'р╕бр╕нр╕Др╕Др╣Ир╕▓ р╕бр╕┤р╣Йр╕Щр╕Чр╣М', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -114, name: 'р╣Др╕зр╕Чр╣Мр╕Кр╣Зр╕нр╕Б р╕бр╕нр╕Др╕Др╣Ир╕▓', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -115, name: 'р╕Др╕▓р╕гр╕▓р╣Ар╕бр╕е р╣Ар╕ор╣Ар╕Лр╕ер╕Щр╕▒р╕Ч р╕ер╕▓р╣Ар╕Хр╣Й', prices: { 'р╣Ар╕вр╣Зр╕Щ': 55, 'р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ];
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а const fruitSmoothieData = [
┬а ┬а ┬а ┬а ┬а ┬а { id: -201, name: 'р╕Щр╕бр╕кр╕Ф р╕Бр╕╡р╕зр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 55 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -202, name: 'р╕Щр╕бр╕кр╕Ф р╕кр╕Хр╕нр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 40, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 45, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 55 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -203, name: 'р╕кр╕Хр╕нр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И р╕Кр╣Зр╕нр╕Б', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -204, name: 'р╕Кр╕▓р╣Др╕Чр╕в р╕кр╕Хр╕нр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -205, name: 'р╕Кр╕▓р╣Ар╕Вр╕╡р╕вр╕з р╕кр╕Хр╕нр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -206, name: 'р╣Вр╕Бр╣Вр╕Бр╣Й р╕кр╕Хр╕нр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -207, name: 'р╕Кр╣Зр╕нр╕Б р╕кр╕Хр╕нр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 50, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 55, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 60, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -208, name: 'р╕Щр╕бр╕кр╕Ф р╕Ър╕ер╕╣р╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 45, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -209, name: 'р╕Ър╕ер╕╣р╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И р╕Кр╣Зр╕нр╕Б', prices: { '16 Oz. р╣Ар╕вр╣Зр╕Щ': 55, '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60, '22 Oz. р╣Ар╕вр╣Зр╕Щ': 65, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 70 } },
┬а ┬а ┬а ┬а ];

┬а ┬а ┬а ┬а const smoothieYogurtData = [
┬а ┬а ┬а ┬а ┬а ┬а { id: -301, name: 'р╕Бр╕╡р╕зр╕╡р╣И', prices: { '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -302, name: 'р╕кр╕Хр╕нр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -303, name: 'р╕Юр╕╡р╕К', prices: { '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -304, name: 'р╕Ър╕ер╕╣р╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 55, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -305, name: 'р╕бр╕┤р╕Бр╕Лр╣Мр╣Ар╕Ър╕нр╕гр╣Мр╕гр╕╡р╣И', prices: { '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 55, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -306, name: 'р╣Вр╕вр╣Ар╕Бр╕┤р╕гр╣Мр╕Х р╕Ыр╕╡р╣Вр╕Ыр╣Й', prices: { '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -307, name: 'р╕ер╕┤р╣Йр╕Щр╕Ир╕╡р╣И', prices: { '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 55, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 65 } },
┬а ┬а ┬а ┬а ┬а ┬а { id: -308, name: 'р╕кр╣Йр╕б', prices: { '16 Oz. р╕Ыр╕▒р╣Ир╕Щ': 50, '22 Oz. р╕Ыр╕▒р╣Ир╕Щ': 60 } },
┬а ┬а ┬а ┬а ];

┬а ┬а ┬а ┬а // р╕гр╕зр╕бр╣Ар╕бр╕Щр╕╣р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
┬а ┬а ┬а ┬а const allMenuData = [...menuData, ...matchaMenuData, ...coffeeMenuData, ...fruitSmoothieData, ...smoothieYogurtData];
┬а ┬а ┬а ┬а const sweetnessOptions = ['100%', '75%', '50%', '25%'];

┬а ┬а ┬а ┬а // ЁЯФе Firebase Global Variables ЁЯФе
┬а ┬а ┬а ┬а let currentOrder = [];
┬а ┬а ┬а ┬а let orderQueue = [];┬а
┬а ┬а ┬а ┬а let menuSalesLog = [];┬а

┬а ┬а ┬а ┬а const menuGrid = document.getElementById('menu-grid');
┬а ┬а ┬а ┬а const currentOrderItemsEl = document.getElementById('current-order-items');
┬а ┬а ┬а ┬а const totalPriceEl = document.getElementById('total-price');
┬а ┬а ┬а ┬а const submitOrderBtn = document.getElementById('submit-order-btn');
┬а ┬а ┬а ┬а const orderQueueEl = document.getElementById('order-queue');
┬а ┬а ┬а ┬а const deliveryAddressInput = document.getElementById('delivery-address');

┬а ┬а ┬а ┬а const salesTodayEl = document.getElementById('sales-today');
┬а ┬а ┬а ┬а const salesWeekEl = document.getElementById('sales-week');
┬а ┬а ┬а ┬а const salesMonthEl = document.getElementById('sales-month');
┬а ┬а ┬а ┬а const menuReportModal = document.getElementById('menu-report-modal');
┬а ┬а ┬а ┬а const menuReportContent = document.getElementById('menu-report-content');
┬а ┬а ┬а ┬а const qrPaymentModal = document.getElementById('qr-payment-modal');
┬а ┬а ┬а ┬а const qrTotalAmountEl = document.getElementById('qr-total-amount');

┬а ┬а ┬а ┬а let lastCommittedOrder = null;

┬а ┬а ┬а ┬а // Helper function to find item data from all menus (р╕Др╕Зр╣Ар╕Фр╕┤р╕б)
┬а ┬а ┬а ┬а function getItemDataById(itemId) {
┬а ┬а ┬а ┬а ┬а ┬а return allMenuData.find(i => i.id === itemId);
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а function showPaymentQRModal(orderTotal) {
┬а ┬а ┬а ┬а ┬а ┬а qrTotalAmountEl.textContent = `р╕┐${orderTotal.toLocaleString('th-TH')}`;
┬а ┬а ┬а ┬а ┬а ┬а qrPaymentModal.classList.remove('hidden');
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // --- Date Helper Functions (р╕Др╕Зр╣Ар╕Фр╕┤р╕б) ---
┬а ┬а ┬а ┬а function isToday(date) {
┬а ┬а ┬а ┬а ┬а ┬а const today = new Date();
┬а ┬а ┬а ┬а ┬а ┬а return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function isThisWeek(date) {
┬а ┬а ┬а ┬а ┬а ┬а const now = new Date();
┬а ┬а ┬а ┬а ┬а ┬а const startOfWeek = new Date(now.setDate(now.getDate() - now.getDay()));
┬а ┬а ┬а ┬а ┬а ┬а const endOfWeek = new Date(now.setDate(now.getDate() - now.getDay() + 6));
┬а ┬а ┬а ┬а ┬а ┬а return date >= startOfWeek && date <= endOfWeek;
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function isThisMonth(date) {
┬а ┬а ┬а ┬а ┬а ┬а const now = new Date();
┬а ┬а ┬а ┬а ┬а ┬а return date.getMonth() === now.getMonth() && date.getFullYear() === now.getFullYear();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а// ЁЯФе Firebase Realtime Listeners (р╣Гр╕Кр╣Й Query 2 р╕Кр╕▒р╣Йр╕Щ) ЁЯФе
function initFirebaseListeners() {
┬а ┬а // 1. Realtime Listener р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Др╕┤р╕зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М (Orders Collection)
    // *** р╣Бр╕Бр╣Йр╣Др╕Вр╕Хр╕гр╕Зр╕Щр╕╡р╣Й: р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Ир╕▓р╕Б "orders" р╣Ар╕Ыр╣Зр╕Щ "Orders" ***
┬а ┬а db.collection("Orders") 
┬а ┬а ┬а ┬а .orderBy("status", "asc")┬а
┬а ┬а ┬а ┬а .orderBy("placedAt", "asc")┬а
┬а ┬а ┬а ┬а .onSnapshot(snapshot => {┬а
┬а ┬а ┬а ┬а ┬а ┬а orderQueue = snapshot.docs.map(doc => ({┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а id: doc.id,┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ...doc.data()┬а
┬а ┬а ┬а ┬а ┬а ┬а }));
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а renderOrderQueue();
┬а ┬а ┬а ┬а }, error => {
┬а ┬а ┬а ┬а ┬а ┬а console.error("Firebase Order Listener Error:", error);
┬а ┬а ┬а ┬а ┬а ┬а orderQueueEl.innerHTML = '<p class="text-red-500 text-center mt-4 font-bold">тЪая╕П ERROR: р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕Фр╣Й (р╣Вр╕Ыр╕гр╕Фр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Console/Rules/Index)</p>';
┬а ┬а ┬а ┬а });

┬а ┬а // 2. Listener р╕кр╕│р╕лр╕гр╕▒р╕Ър╕вр╕нр╕Фр╕Вр╕▓р╕в (salesLog Collection)
┬а ┬а db.collection("salesLog").onSnapshot(snapshot => {
┬а ┬а ┬а ┬а menuSalesLog = snapshot.docs.map(doc => doc.data());
┬а ┬а ┬а ┬а updateSalesDashboard();
┬а ┬а }, error => {
┬а ┬а ┬а ┬а console.error("Firebase Sales Listener Error:", error);
┬а ┬а });
}┬а
┬а ┬а ┬а ┬а // --- Modal Render Functions (р╕Щр╕│р╣Вр╕Др╣Йр╕Фр╕Бр╕ер╕▒р╕Ър╕бр╕▓) ---
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а function showMatchaMenuModal() {
┬а ┬а ┬а ┬а ┬а ┬а renderMatchaMenu();
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('matcha-modal').classList.remove('hidden');
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function renderMatchaMenu() {
┬а ┬а ┬а ┬а ┬а ┬а const matchaMenuListEl = document.getElementById('matcha-menu-list');
┬а ┬а ┬а ┬а ┬а ┬а matchaMenuListEl.innerHTML = '';
┬а ┬а ┬а ┬а ┬а ┬а matchaMenuData.forEach(item => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const p16 = item.prices['16 Oz. р╣Ар╕вр╣Зр╕Щ'] ? `р╕┐${item.prices['16 Oz. р╣Ар╕вр╣Зр╕Щ']}` : 'X';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const p22 = item.prices['22 Oz. р╣Ар╕вр╣Зр╕Щ'] || item.prices['22 Oz. р╕Ыр╕▒р╣Ир╕Щ'];
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const p22Display = p22 ? `р╕┐${p22}` : 'X';

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const menuCard = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.className = 'matcha-menu-card';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.setAttribute('onclick', `addToOrder(${item.id})`);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.innerHTML = `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1/2 text-sm font-medium text-gray-800">${item.name}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1/4 text-center text-sm ${p16 === 'X' ? 'text-red-500' : 'price-small'}">${p16}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1/4 text-center text-sm ${p22Display === 'X' ? 'text-red-500' : 'price-large'}">${p22Display}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а matchaMenuListEl.appendChild(menuCard);
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а function showCoffeeMenuModal() {
┬а ┬а ┬а ┬а ┬а ┬а renderCoffeeMenu();
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('coffee-modal').classList.remove('hidden');
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function renderCoffeeMenu() {
┬а ┬а ┬а ┬а ┬а ┬а const coffeeMenuListEl = document.getElementById('coffee-menu-list');
┬а ┬а ┬а ┬а ┬а ┬а coffeeMenuListEl.innerHTML = '';
┬а ┬а ┬а ┬а ┬а ┬а coffeeMenuData.forEach(item => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а let priceDisplay = '';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const sizes = Object.keys(item.prices);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (sizes.length === 1) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а priceDisplay = `р╕┐${item.prices[sizes[0]]} (${sizes[0]})`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а } else if (sizes.length === 2 && item.prices['р╣Ар╕вр╣Зр╕Щ'] && item.prices['р╕Ыр╕▒р╣Ир╕Щ']) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (item.prices['р╣Ар╕вр╣Зр╕Щ'] === item.prices['р╕Ыр╕▒р╣Ир╕Щ']) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а priceDisplay = `р╕┐${item.prices['р╣Ар╕вр╣Зр╕Щ']}`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а priceDisplay = `р╕┐${item.prices['р╣Ар╕вр╣Зр╕Щ']} / р╕┐${item.prices['р╕Ыр╕▒р╣Ир╕Щ']} (р╕Ыр╕▒р╣Ир╕Щ)`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а } else if (sizes.length > 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а priceDisplay = sizes.map(size => `р╕┐${item.prices[size]} (${size})`).join(', ');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а priceDisplay = '---';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const menuCard = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.className = 'coffee-menu-card';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.setAttribute('onclick', `addToOrder(${item.id})`);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.innerHTML = `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-2/3 text-sm font-medium text-gray-800">${item.name}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-1/3 text-right text-sm price-coffee">${priceDisplay}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а coffeeMenuListEl.appendChild(menuCard);
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а function showFruitSmoothieModal() {
┬а ┬а ┬а ┬а ┬а ┬а renderFruitSmoothieMenu();
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('fruit-smoothie-modal').classList.remove('hidden');
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function renderFruitSmoothieMenu() {
┬а ┬а ┬а ┬а ┬а ┬а const fruitSmoothieListEl = document.getElementById('fruit-smoothie-list');
┬а ┬а ┬а ┬а ┬а ┬а const smoothieYogurtListEl = document.getElementById('smoothie-yogurt-list');
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а fruitSmoothieListEl.innerHTML = '';
┬а ┬а ┬а ┬а ┬а ┬а smoothieYogurtListEl.innerHTML = '';

┬а ┬а ┬а ┬а ┬а ┬а // --- 1. Fruit Smoothie Section ---
┬а ┬а ┬а ┬а ┬а ┬а const fruitSmoothieHeader = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а fruitSmoothieHeader.className = 'flex justify-between text-center font-bold text-gray-600 mb-2 border-b pb-1 text-sm';
┬а ┬а ┬а ┬а ┬а ┬а fruitSmoothieHeader.innerHTML = `<span class="w-1/2 text-left">р╣Ар╕бр╕Щр╕╣</span><span class="w-1/4">16 Oz.</span><span class="w-1/4">22 Oz.</span>`;
┬а ┬а ┬а ┬а ┬а ┬а fruitSmoothieListEl.appendChild(fruitSmoothieHeader);

┬а ┬а ┬а ┬а ┬а ┬а fruitSmoothieData.forEach(item => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const p16 = `${item.prices['16 Oz. р╣Ар╕вр╣Зр╕Щ'] || 'X'} / ${item.prices['16 Oz. р╕Ыр╕▒р╣Ир╕Щ'] || 'X'}`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const p22 = `${item.prices['22 Oz. р╣Ар╕вр╣Зр╕Щ'] || 'X'} / ${item.prices['22 Oz. р╕Ыр╕▒р╣Ир╕Щ'] || 'X'}`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const menuCard = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.className = 'smoothie-menu-card';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.setAttribute('onclick', `addToOrder(${item.id})`);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.innerHTML = `<span class="w-1/2 text-sm font-medium text-gray-800">${item.name}</span><span class="w-1/4 text-center text-xs price-smoothie">${p16}</span><span class="w-1/4 text-center text-xs price-smoothie">${p22}</span>`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а fruitSmoothieListEl.appendChild(menuCard);
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а // --- 2. Smoothie Yogurt Section ---
┬а ┬а ┬а ┬а ┬а ┬а const yogurtHeader = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а yogurtHeader.className = 'flex justify-between text-center font-bold text-gray-600 mb-2 border-b pb-1 text-sm';
┬а ┬а ┬а ┬а ┬а ┬а yogurtHeader.innerHTML = `<span class="w-2/3 text-left">р╣Ар╕бр╕Щр╕╣ (р╕Ыр╕▒р╣Ир╕Щр╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ)</span><span class="w-1/6">16 Oz.</span><span class="w-1/6">22 Oz.</span>`;
┬а ┬а ┬а ┬а ┬а ┬а smoothieYogurtListEl.appendChild(yogurtHeader);

┬а ┬а ┬а ┬а ┬а ┬а smoothieYogurtData.forEach(item => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const p16 = item.prices['16 Oz. р╕Ыр╕▒р╣Ир╕Щ'];
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const p22 = item.prices['22 Oz. р╕Ыр╕▒р╣Ир╕Щ'];
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const menuCard = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.className = 'smoothie-menu-card';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.setAttribute('onclick', `addToOrder(${item.id})`);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuCard.innerHTML = `<span class="w-2/3 text-sm font-medium text-gray-800">${item.name}</span><span class="w-1/6 text-center text-xs price-smoothie">р╕┐${p16}</span><span class="w-1/6 text-center text-xs price-smoothie">р╕┐${p22}</span>`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а smoothieYogurtListEl.appendChild(menuCard);
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а }


┬а ┬а ┬а ┬а // --- Core Application Logic (р╣Вр╕Др╣Йр╕Фр╕Чр╕╡р╣Ир╣Ар╕лр╕ер╕╖р╕н) ---
┬а ┬а ┬а ┬а // (р╕кр╣Ир╕зр╕Щр╕Щр╕╡р╣Йр╕Хр╣Ир╕нр╣Ар╕Щр╕╖р╣Ир╕нр╕Зр╕Ир╕▓р╕Бр╣Вр╕Др╣Йр╕Фр╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ)
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а function renderMenu() {
┬а ┬а ┬а ┬а ┬а ┬а ┬аconst specialMenuIds = [...matchaMenuData, ...coffeeMenuData, ...fruitSmoothieData, ...smoothieYogurtData].map(item => item.id);
┬а ┬а ┬а ┬а ┬а ┬а const otherMenuData = menuData.filter(item => !specialMenuIds.includes(item.id));
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а const existingSpecialButtons = menuGrid.querySelectorAll('.p-3.bg-amber-700, .p-3.bg-emerald-500, .p-3.bg-sky-500');
┬а ┬а ┬а ┬а ┬а ┬а const newGridContent = Array.from(existingSpecialButtons).map(btn => btn.outerHTML).join('');
┬а ┬а ┬а ┬а ┬а ┬а menuGrid.innerHTML = newGridContent;

┬а ┬а ┬а ┬а ┬а ┬а otherMenuData.forEach(item => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const menuItem = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuItem.className = 'p-3 bg-teal-50 hover:bg-teal-100 rounded-lg text-center cursor-pointer transition duration-300 shadow-sm';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuItem.innerHTML = `<span class="font-semibold">${item.name}</span>`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuItem.onclick = () => addToOrder(item.id);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuGrid.appendChild(menuItem);
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function addToOrder(itemId) {
┬а ┬а ┬а ┬а ┬а ┬а const item = getItemDataById(itemId);
┬а ┬а ┬а ┬а ┬а ┬а if (!item) return;

┬а ┬а ┬а ┬а ┬а ┬а const defaultSize = Object.keys(item.prices)[0];
┬а ┬а ┬а ┬а ┬а ┬а const defaultSweetness = sweetnessOptions[0];

┬а ┬а ┬а ┬а ┬а ┬а const orderItem = {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а id: Date.now(),
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а itemId: item.id,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а name: item.name,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а size: defaultSize,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а price: item.prices[defaultSize],
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а quantity: 1,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а sweetness: defaultSweetness,
┬а ┬а ┬а ┬а ┬а ┬а };
┬а ┬а ┬а ┬а ┬а ┬а currentOrder.push(orderItem);
┬а ┬а ┬а ┬а ┬а ┬а renderCurrentOrder();
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('matcha-modal').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('coffee-modal').classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('fruit-smoothie-modal').classList.add('hidden');
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а function renderCurrentOrder() {
┬а ┬а ┬а ┬а ┬а ┬а if (currentOrder.length === 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а currentOrderItemsEl.innerHTML = '<p class="text-gray-400 text-center mt-4">р╣Ар╕ер╕╖р╕нр╕Бр╣Ар╕бр╕Щр╕╣р╕Ир╕▓р╕Бр╕Фр╣Йр╕▓р╕Щр╕Лр╣Йр╕▓р╕вр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕гр╕┤р╣Ир╕б...</p>';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а submitOrderBtn.disabled = true;
┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а currentOrderItemsEl.innerHTML = '';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а currentOrder.forEach(item => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const menuItem = getItemDataById(item.itemId);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const availableSizes = Object.keys(menuItem.prices);

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const sizeOptions = availableSizes.map(size => `<option value="${size}" ${item.size === size ? 'selected' : ''}>${size}</option>`).join('');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const sweetnessDropdown = sweetnessOptions.map(level => `<option value="${level}" ${item.sweetness === level ? 'selected' : ''}>${level}</option>`).join('');

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const itemEl = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а itemEl.className = 'flex items-center justify-between bg-gray-50 p-2 rounded-lg';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а itemEl.innerHTML = `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex-grow grid grid-cols-2 gap-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="font-semibold col-span-2">${item.name}</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex flex-col">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-xs font-medium text-gray-500 mb-1">р╕Вр╕Щр╕▓р╕Ф</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <select class="text-sm p-1 border rounded" onchange="updateOrderItemSize(${item.id}, this.value)">${sizeOptions}</select>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex flex-col">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-xs font-medium text-gray-500 mb-1">р╕лр╕зр╕▓р╕Щ</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <select class="text-sm p-1 border rounded" onchange="updateOrderItemSweetness(${item.id}, this.value)">${sweetnessDropdown}</select>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex items-center gap-2 ml-4">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button class="w-6 h-6 bg-gray-200 rounded-full" onclick="updateOrderItemQuantity(${item.id}, -1)">-</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span>${item.quantity}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button class="w-6 h-6 bg-gray-200 rounded-full" onclick="updateOrderItemQuantity(${item.id}, 1)">+</button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="w-20 text-right font-semibold">р╕┐${(item.price * item.quantity).toLocaleString('th-TH')}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button class="ml-2 text-red-500 hover:text-red-700" onclick="removeOrderItem(${item.id})">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а currentOrderItemsEl.appendChild(itemEl);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а submitOrderBtn.disabled = false;
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а updateTotalPrice();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function updateOrderItemSweetness(orderItemId, newSweetness) {
┬а ┬а ┬а ┬а ┬а ┬а const orderItem = currentOrder.find(item => item.id === orderItemId);
┬а ┬а ┬а ┬а ┬а ┬а orderItem.sweetness = newSweetness;
┬а ┬а ┬а ┬а ┬а ┬а renderCurrentOrder();
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а function updateOrderItemSize(orderItemId, newSize) {
┬а ┬а ┬а ┬а ┬а ┬а const orderItem = currentOrder.find(item => item.id === orderItemId);
┬а ┬а ┬а ┬а ┬а ┬а const menuItem = getItemDataById(orderItem.itemId);
┬а ┬а ┬а ┬а ┬а ┬а if (menuItem.prices[newSize] !== undefined) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а orderItem.size = newSize;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а orderItem.price = menuItem.prices[newSize];
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а renderCurrentOrder();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function updateOrderItemQuantity(orderItemId, change) {
┬а ┬а ┬а ┬а ┬а ┬а const orderItem = currentOrder.find(item => item.id === orderItemId);
┬а ┬а ┬а ┬а ┬а ┬а if (orderItem.quantity + change > 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а orderItem.quantity += change;
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а renderCurrentOrder();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function removeOrderItem(orderItemId) {
┬а ┬а ┬а ┬а ┬а ┬а currentOrder = currentOrder.filter(item => item.id !== orderItemId);
┬а ┬а ┬а ┬а ┬а ┬а renderCurrentOrder();
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function updateTotalPrice() {
┬а ┬а ┬а ┬а ┬а ┬а const total = currentOrder.reduce((sum, item) => sum + item.price * item.quantity, 0);
┬а ┬а ┬а ┬а ┬а ┬а totalPriceEl.textContent = `р╕┐${total.toLocaleString('th-TH')}`;
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а function shareOrderSummary() {
┬а ┬а ┬а ┬а ┬а ┬а if (!lastCommittedOrder) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а alert('р╣Др╕бр╣Ир╕Юр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕ер╣Ир╕▓р╕кр╕╕р╕Фр╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕Кр╕гр╣М');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return;
┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а const itemsText = lastCommittedOrder.items.map(item =>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `* ${item.name} (${item.size}, р╕лр╕зр╕▓р╕Щ ${item.sweetness}) x${item.quantity} = р╕┐${(item.price * item.quantity).toLocaleString('th-TH')}`
┬а ┬а ┬а ┬а ┬а ┬а ).join('\n');

┬а ┬а ┬а ┬а ┬а ┬а const shareText =
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `тЬЕ *р╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕е #${lastCommittedOrder.id.substring(0, 8)} - ${new Date().toLocaleDateString('th-TH')}*\n` +
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `----------------------------------------\n` +
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `${itemsText}\n` +
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `----------------------------------------\n` +
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `ЁЯУН р╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣И: ${lastCommittedOrder.address}\n` +
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `ЁЯТ░ *р╕гр╕зр╕бр╕Чр╕▒р╣Йр╕Зр╕кр╕┤р╣Йр╕Щ: р╕┐${lastCommittedOrder.total.toLocaleString('th-TH')}*\n\n` +
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `ЁЯТм *[р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ] р╕Бр╕гр╕╕р╕Ур╕▓р╣Гр╕Кр╣Й QR Code р╣Гр╕Щр╕гр╕╣р╕Ыр╕ар╕▓р╕Ю (р╕Чр╕╡р╣Ир╣Бр╕Щр╕Ър╕бр╕▓р╕Юр╕гр╣Йр╕нр╕бр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Щр╕╡р╣Й) р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╣Бр╕Бр╕Щр╕Ир╣Ир╕▓р╕вр╣Ар╕Зр╕┤р╕Щ*\n` +
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `р╕Кр╕╖р╣Ир╕нр╕Ър╕▒р╕Нр╕Кр╕╡: р╕Щ.р╕к.р╕Щр╕др╕Хр╕Нр╕▓ р╕Щр╕▓р╣Ар╕бр╕╖р╕нр╕Зр╕гр╕▒р╕Бр╕йр╣М`;

┬а ┬а ┬а ┬а ┬а ┬а if (navigator.share) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а navigator.share({ title: `р╕Ър╕┤р╕ер╕нр╕нр╣Ар╕Фр╕нр╕гр╣М #${lastCommittedOrder.id.substring(0, 8)}`, text: shareText })
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .catch((error) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а navigator.clipboard.writeText(shareText)
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .then(() => alert('р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕е (р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б) р╣Др╕Ыр╕вр╕▒р╕Зр╕Др╕ер╕┤р╕Ыр╕Ър╕нр╕гр╣Мр╕Фр╣Бр╕ер╣Йр╕з!'))
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .catch(err => console.error('Could not copy text: ', err));
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а navigator.clipboard.writeText(shareText)
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .then(() => alert('р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕е (р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б) р╣Др╕Ыр╕вр╕▒р╕Зр╕Др╕ер╕┤р╕Ыр╕Ър╕нр╕гр╣Мр╕Фр╣Бр╕ер╣Йр╕з!'))
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .catch(err => console.error('Could not copy text: ', err));
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а }


┬а ┬а ┬а ┬а // ЁЯФе UPDATED: Submit Order (р╕Бр╕ер╕▒р╕Ър╕бр╕▓р╣Гр╕Кр╣Й Firestore) ЁЯФе
┬а ┬а ┬а ┬а submitOrderBtn.addEventListener('click', () => {
┬а ┬а ┬а ┬а ┬а ┬а const orderTotal = currentOrder.reduce((sum, item) => sum + item.price * item.quantity, 0);

┬а ┬а ┬а ┬а ┬а ┬а if (currentOrder.length > 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const address = deliveryAddressInput.value.trim();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const isPickup = address === '';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (isPickup) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬аif (!confirm("р╕Др╕╕р╕Ур╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Бр╕гр╕нр╕Бр╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣И р╕Ир╕░р╕Цр╕╖р╕нр╣Ар╕Ыр╣Зр╕Щ 'р╕гр╕▒р╕Ър╣Ар╕нр╕Зр╕Чр╕╡р╣Ир╕гр╣Йр╕▓р╕Щ' р╣Гр╕Кр╣Ир╕лр╕гр╕╖р╕нр╣Др╕бр╣И?")) { return; }
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }

                // *** р╣Бр╕Бр╣Йр╣Др╕Вр╕Хр╕гр╕Зр╕Щр╕╡р╣Й: р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Ир╕▓р╕Б "orders" р╣Ар╕Ыр╣Зр╕Щ "Orders" ***
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а db.collection("Orders").add({
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а items: currentOrder,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а total: orderTotal,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а address: address || 'р╕гр╕▒р╕Ър╣Ар╕нр╕Зр╕Чр╕╡р╣Ир╕гр╣Йр╕▓р╕Щ',
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а status: 'р╕Др╕┤р╕з',
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а placedAt: firebase.firestore.FieldValue.serverTimestamp(), // р╣Гр╕Кр╣Йр╣Ар╕зр╕ер╕▓р╕Ир╕▓р╕Б Server
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а })
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .then(docRef => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а lastCommittedOrder = {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬аid: docRef.id,┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬аitems: [...currentOrder],
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬аtotal: orderTotal,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬аaddress: address || 'р╕гр╕▒р╕Ър╣Ар╕нр╕Зр╕Чр╕╡р╣Ир╕гр╣Йр╕▓р╕Щ',
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а };
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а currentOrder = [];┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а deliveryAddressInput.value = '';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а renderCurrentOrder();┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а showPaymentQRModal(orderTotal);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а })
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .catch(error => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error("Error adding document: ", error);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а alert("р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╣Ир╕Зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╣Др╕Фр╣Й р╕Бр╕гр╕╕р╕Ур╕▓р╕ер╕нр╕Зр╣Гр╕лр╕бр╣И");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а // ЁЯФе UPDATED: renderOrderQueue (р╣Гр╕Кр╣Й Order ID р╕Ир╕▓р╕Б Firestore р╣Бр╕ер╕░р╕Бр╕гр╕нр╕Зр╕кр╕Цр╕▓р╕Щр╕░) ЁЯФе
┬а ┬а ┬а ┬а function renderOrderQueue() {
┬а ┬а ┬а ┬а ┬а ┬а const activeQueue = orderQueue.filter(order => order.status !== 'р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з' && order.status !== 'р╕вр╕Бр╣Ар╕ер╕┤р╕Б');
┬а ┬а ┬а ┬а ┬а ┬а const displayQueue = activeQueue.length > 0 ? activeQueue : orderQueue;


┬а ┬а ┬а ┬а ┬а ┬а if (displayQueue.length === 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а orderQueueEl.innerHTML = '<p class="text-gray-400 text-center mt-4">р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╣Гр╕Щр╕Др╕┤р╕з</p>';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return;
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а orderQueueEl.innerHTML = '';
┬а ┬а ┬а ┬а ┬а ┬а displayQueue.forEach(order => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const itemsSummary = order.items.map(item => `${item.name} (${item.size}, р╕лр╕зр╕▓р╕Щ ${item.sweetness}) x${item.quantity}`).join(', ');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const statusColor = {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а 'р╕Др╕┤р╕з': 'bg-blue-100 text-blue-800',
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а 'р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕│': 'bg-yellow-100 text-yellow-800',
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а 'р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з': 'bg-green-100 text-green-800',
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а 'р╕вр╕Бр╣Ар╕ер╕┤р╕Б': 'bg-red-100 text-red-800'
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }[order.status];
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const isCompleted = order.status === 'р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з' || order.status === 'р╕вр╕Бр╣Ар╕ер╕┤р╕Б';

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const orderCard = document.createElement('div');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а orderCard.className = `p-4 rounded-lg shadow-sm ${isCompleted ? 'bg-gray-200 opacity-75' : 'bg-gray-50 hover:bg-white'}`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а orderCard.innerHTML = `
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex justify-between items-start mb-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h4 class="font-bold text-lg">р╕нр╕нр╣Ар╕Фр╕нр╕гр╣М #${order.id.substring(0, 8)}...</h4>┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-sm text-gray-600">${itemsSummary}</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-xs text-gray-500 mt-1">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="font-semibold">р╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣И:</span> ${order.address}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-lg font-bold text-teal-600">р╕┐${order.total.toLocaleString('th-TH')}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex items-center justify-between">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-sm font-semibold px-2.5 py-0.5 rounded-full ${statusColor}">${order.status}</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex gap-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ${order.status === 'р╕Др╕┤р╕з' ? `<button class="text-xs bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-1 px-3 rounded-lg" onclick="updateOrderStatus('${order.id}', 'р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕│')">р╕гр╕▒р╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣М</button>` : ''}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ${order.status === 'р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕│' ? `<button class="text-xs bg-green-500 hover:bg-green-600 text-white font-bold py-1 px-3 rounded-lg" onclick="updateOrderStatus('${order.id}', 'р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з')">р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ</button>` : ''}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ${!isCompleted ? `<button class="text-xs bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-3 rounded-lg" onclick="updateOrderStatus('${order.id}', 'р╕вр╕Бр╣Ар╕ер╕┤р╕Б')">р╕вр╕Бр╣Ар╕ер╕┤р╕Б</button>` : ''}
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а orderQueueEl.appendChild(orderCard);
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // ЁЯФе UPDATED: updateOrderStatus (р╣Гр╕Кр╣Й Firebase ID/Doc Ref) ЁЯФе
┬а ┬а ┬а ┬а function updateOrderStatus(orderId, newStatus) {
┬а ┬а ┬а ┬а ┬а ┬а const order = orderQueue.find(o => o.id === orderId);
┬а ┬а ┬а ┬а ┬а ┬а if (!order) return;

┬а ┬а ┬а ┬а ┬а ┬а const updateData = { status: newStatus };
┬а ┬а ┬а ┬а ┬а ┬а if (newStatus === 'р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з') {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а updateData.completedAt = firebase.firestore.FieldValue.serverTimestamp();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const batch = db.batch();┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а order.items.forEach(item => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const newLogRef = db.collection("salesLog").doc();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а batch.set(newLogRef, {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а name: item.name,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а size: item.size,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а sweetness: item.sweetness,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а quantity: item.quantity,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а price: item.price,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а soldAt: updateData.completedAt,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а orderId: orderId
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а batch.commit().then(() => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.log("Sales Log batch successfully written!");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }).catch((error) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.error("Error writing sales log batch: ", error);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а┬а
            // *** р╣Бр╕Бр╣Йр╣Др╕Вр╕Хр╕гр╕Зр╕Щр╕╡р╣Й: р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Ир╕▓р╕Б "orders" р╣Ар╕Ыр╣Зр╕Щ "Orders" ***
┬а ┬а ┬а ┬а ┬а ┬а db.collection("Orders").doc(orderId).update(updateData)
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .then(() => console.log("Order status updated!"))
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .catch(error => console.error("Error updating order: ", error));
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function updateSalesDashboard() {
┬а ┬а ┬а ┬а ┬а ┬а let salesToday = 0;
┬а ┬а ┬а ┬а ┬а ┬а let salesWeek = 0;
┬а ┬а ┬а ┬а ┬а ┬а let salesMonth = 0;
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а menuSalesLog.forEach(log => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const saleDate = log.soldAt ? new Date(log.soldAt.seconds * 1000) : new Date();
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const totalRevenue = log.price * log.quantity;

┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (isToday(saleDate)) { salesToday += totalRevenue; }
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (isThisWeek(saleDate)) { salesWeek += totalRevenue; }
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (isThisMonth(saleDate)) { salesMonth += totalRevenue; }
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а salesTodayEl.textContent = `р╕┐${salesToday.toLocaleString('th-TH')}`;
┬а ┬а ┬а ┬а ┬а ┬а salesWeekEl.textContent = `р╕┐${salesWeek.toLocaleString('th-TH')}`;
┬а ┬а ┬а ┬а ┬а ┬а salesMonthEl.textContent = `р╕┐${salesMonth.toLocaleString('th-TH')}`;
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а function showMenuReport() {
┬а ┬а ┬а ┬а ┬а ┬а const menuSales = {};
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а menuSalesLog.forEach(log => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const key = `${log.name} (${log.size}, р╕лр╕зр╕▓р╕Щ ${log.sweetness})`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (!menuSales[key]) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuSales[key] = { name: log.name, size: log.size, sweetness: log.sweetness, totalQuantity: 0, totalRevenue: 0, };
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuSales[key].totalQuantity += log.quantity;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а menuSales[key].totalRevenue += log.price * log.quantity;
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а const sortedMenuReport = Object.values(menuSales).sort((a, b) => b.totalQuantity - a.totalQuantity);
┬а ┬а ┬а ┬а ┬а ┬а let tableHTML = '<p class="text-gray-500 mb-4">р╕кр╕гр╕╕р╕Ыр╕вр╕нр╕Фр╕Вр╕▓р╕вр╣Ар╕бр╕Щр╕╣р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Чр╕╡р╣Ир╕Чр╕│р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з р╣Ар╕гр╕╡р╕вр╕Зр╕Хр╕▓р╕бр╕Ир╕│р╕Щр╕зр╕Щр╣Бр╕Бр╣Йр╕зр╕Чр╕╡р╣Ир╕Вр╕▓р╕вр╣Др╕Фр╣Йр╕бр╕▓р╕Бр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф</p>';
┬а ┬а ┬а ┬а ┬а ┬а if (sortedMenuReport.length === 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а tableHTML += '<p class="text-center text-gray-400 mt-10">р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Вр╕▓р╕вр╕Чр╕╡р╣Ир╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М</p>';
┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а tableHTML += `<table class="min-w-full divide-y divide-gray-200"><thead class="bg-teal-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">р╣Ар╕бр╕Щр╕╣ / р╕Вр╕Щр╕▓р╕Ф / р╕Др╕зр╕▓р╕бр╕лр╕зр╕▓р╕Щ</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">р╕Ир╕│р╕Щр╕зр╕Щ (р╣Бр╕Бр╣Йр╕з)</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">р╕гр╕▓р╕вр╣Др╕Фр╣Йр╕гр╕зр╕б (р╕┐)</th></tr></thead><tbody class="bg-white divide-y divide-gray-200">`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а sortedMenuReport.forEach( (report, index) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а tableHTML += `<tr class="${index < 3 ? 'bg-yellow-50 font-semibold' : ''}"><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${report.name} (${report.size}, р╕лр╕зр╕▓р╕Щ ${report.sweetness})</td><td class="px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900">${report.totalQuantity.toLocaleString('th-TH')}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-right text-teal-600">${report.totalRevenue.toLocaleString('th-TH')}</td></tr>`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а tableHTML += '</tbody></table>';
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а menuReportContent.innerHTML = tableHTML;
┬а ┬а ┬а ┬а ┬а ┬а menuReportModal.classList.remove('hidden');
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // Initial setup
┬а ┬а ┬а ┬а renderMenu();
┬а ┬а ┬а ┬а renderCurrentOrder();
┬а ┬а ┬а ┬а initFirebaseListeners(); // ** р╣Ар╕гр╕┤р╣Ир╕б Listener р╕Чр╕╡р╣Ир╕Щр╕╡р╣И **
┬а ┬а </script>
</body>
</html>
